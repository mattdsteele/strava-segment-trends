---
layout: 'layouts/base.njk'
---

<style>
/* System Fonts as used by GitHub */
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
.trail {
  display: flex;
  flex-direction: column-reverse;
}
header {
  text-align: center;
}
.stat {
  font-size: 1.5em;
  display: flex;
  padding-bottom: 5px;
  max-width: 380px;
  margin: auto;
}
@media(min-width: 700px) {
.trail {
  flex-direction: row;
  margin: auto;
  max-width: 1100px;
  flex-order: normal;
}
.title {
  margin: auto;
  max-width: 1100px;
  font-size: 1.3em;
}
.map {
  width: 35%;
}
.stats {
  width: 65%;
}
.stat {
  font-size: 1.8em;
}
}
img {
  max-width: 100%;
}

.stat label {
  flex-grow: 1;
}
.stat span {
  font-weight: bold;
}

</style>

<header>
  <h1>Omaha Trail Segments</h1>
  <h4>Last updated: <relative-time datetime="{{stats.lastUpdated}}">{{stats.lastUpdated}}</relative-time></h4>
</header>

{% for segment in segments %}

<div class="segment">
  <div class="title">
    <h2>{{segment.trail}} - {{segment.strava.name}} (<a href="https://www.strava.com/segments/{{segment.segmentId}}">{{segment.segmentId}}</a>)</h2>
  </div>
  <section class="trail">
    <div class="map">
      <img src="images/map-{{segment.segmentId}}.png" alt="{{segment.strava.name}}" loading="lazy">
    </div>
    <div class="stats">

      <div class="stat">
        <label>Last ridden</label>
        <span><relative-time datetime="{{segment.stats.lastEffort.ts}}">{{segment.stats.lastEffort.ts}}</relative-time></span>
      </div>

      <div class="stat">
        <label>Rides today</label>
        <span>{{segment.stats.todayStats.count}}</span>
      </div>

      <div class="stat">
        <label>Rides yesterday</label>
        <span>{{segment.stats.yesterdayStats.count}}</span>
      </div>

      <img class="chart" src="{% charturi segment %}" alt="chart">
    </div>

  </section>
</div>
  <hr>
{% endfor %}

